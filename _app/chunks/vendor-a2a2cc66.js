var Ye=Object.defineProperty,Qe=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var _e=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))me.call(t,n)&&_e(e,n,t[n]);if(W)for(var n of W(t))pe.call(t,n)&&_e(e,n,t[n]);return e},v=(e,t)=>Qe(e,Ke(t));var ne=(e,t)=>{var n={};for(var i in e)me.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&W)for(var i of W(e))t.indexOf(i)<0&&pe.call(e,i)&&(n[i]=e[i]);return n};function q(){}function Ze(e,t){for(const n in t)e[n]=t[n];return e}function be(e){return e()}function we(){return Object.create(null)}function z(e){e.forEach(be)}function Ve(e){return typeof e=="function"}function Je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Y;function Kt(e,t){return Y||(Y=document.createElement("a")),Y.href=t,e===Y.href}function Xe(e){return Object.keys(e).length===0}function Zt(e,t,n,i){if(e){const r=Re(e,t,n,i);return e[0](r)}}function Re(e,t,n,i){return e[1]&&i?Ze(n.ctx.slice(),e[1](i(t))):n.ctx}function Vt(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const a=[],s=Math.max(t.dirty.length,r.length);for(let c=0;c<s;c+=1)a[c]=t.dirty[c]|r[c];return a}return t.dirty|r}return t.dirty}function Jt(e,t,n,i,r,a){if(r){const s=Re(t,n,i,a);e.p(s,r)}}function Xt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}let Q=!1;function et(){Q=!0}function tt(){Q=!1}function nt(e,t,n,i){for(;e<t;){const r=e+(t-e>>1);n(r)<=i?e=r+1:t=r}return e}function it(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const o=[];for(let l=0;l<t.length;l++){const h=t[l];h.claim_order!==void 0&&o.push(h)}t=o}const n=new Int32Array(t.length+1),i=new Int32Array(t.length);n[0]=-1;let r=0;for(let o=0;o<t.length;o++){const l=t[o].claim_order,h=(r>0&&t[n[r]].claim_order<=l?r+1:nt(1,r,d=>t[n[d]].claim_order,l))-1;i[o]=n[h]+1;const g=h+1;n[g]=o,r=Math.max(g,r)}const a=[],s=[];let c=t.length-1;for(let o=n[r]+1;o!=0;o=i[o-1]){for(a.push(t[o-1]);c>=o;c--)s.push(t[c]);c--}for(;c>=0;c--)s.push(t[c]);a.reverse(),s.sort((o,l)=>o.claim_order-l.claim_order);for(let o=0,l=0;o<s.length;o++){for(;l<a.length&&s[o].claim_order>=a[l].claim_order;)l++;const h=l<a.length?a[l]:null;e.insertBefore(s[o],h)}}function rt(e,t){if(Q){for(it(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function st(e,t,n){e.insertBefore(t,n||null)}function at(e,t,n){Q&&!n?rt(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function K(e){e.parentNode.removeChild(e)}function xe(e){return document.createElement(e)}function ie(e){return document.createTextNode(e)}function en(){return ie(" ")}function tn(){return ie("")}function nn(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ot(e){return Array.from(e.childNodes)}function ve(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Te(e,t,n,i,r=!1){ve(e);const a=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const c=e[s];if(t(c)){const o=n(c);return o===void 0?e.splice(s,1):e[s]=o,r||(e.claim_info.last_index=s),c}}for(let s=e.claim_info.last_index-1;s>=0;s--){const c=e[s];if(t(c)){const o=n(c);return o===void 0?e.splice(s,1):e[s]=o,r?o===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,c}}return i()})();return a.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,a}function ct(e,t,n,i){return Te(e,r=>r.nodeName===t,r=>{const a=[];for(let s=0;s<r.attributes.length;s++){const c=r.attributes[s];n[c.name]||a.push(c.name)}a.forEach(s=>r.removeAttribute(s))},()=>i(t))}function rn(e,t,n){return ct(e,t,n,xe)}function lt(e,t){return Te(e,n=>n.nodeType===3,n=>{const i=""+t;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>ie(t),!0)}function sn(e){return lt(e," ")}function ke(e,t,n){for(let i=n;i<e.length;i+=1){const r=e[i];if(r.nodeType===8&&r.textContent.trim()===t)return i}return e.length}function an(e){const t=ke(e,"HTML_TAG_START",0),n=ke(e,"HTML_TAG_END",t);if(t===n)return new $e;ve(e);const i=e.splice(t,n+1);K(i[0]),K(i[i.length-1]);const r=i.slice(1,i.length-1);for(const a of r)a.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1;return new $e(r)}function on(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function cn(e,t=document.body){return Array.from(t.querySelectorAll(e))}class ut{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.e=xe(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)st(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(K)}}class $e extends ut{constructor(t){super();this.e=this.n=null,this.l=t}c(t){this.l?this.n=this.l:super.c(t)}i(t){for(let n=0;n<this.n.length;n+=1)at(this.t,this.n[n],t)}}let Z;function V(e){Z=e}function re(){if(!Z)throw new Error("Function called outside component initialization");return Z}function ln(e){re().$$.on_mount.push(e)}function un(e){re().$$.after_update.push(e)}function fn(e,t){re().$$.context.set(e,t)}const H=[],Se=[],J=[],Ae=[],ft=Promise.resolve();let se=!1;function ht(){se||(se=!0,ft.then(Be))}function ae(e){J.push(e)}let oe=!1;const ce=new Set;function Be(){if(!oe){oe=!0;do{for(let e=0;e<H.length;e+=1){const t=H[e];V(t),dt(t.$$)}for(V(null),H.length=0;Se.length;)Se.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];ce.has(t)||(ce.add(t),t())}J.length=0}while(H.length);for(;Ae.length;)Ae.pop()();se=!1,oe=!1,ce.clear()}}function dt(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}const X=new Set;let N;function hn(){N={r:0,c:[],p:N}}function dn(){N.r||z(N.c),N=N.p}function Me(e,t){e&&e.i&&(X.delete(e),e.i(t))}function gt(e,t,n,i){if(e&&e.o){if(X.has(e))return;X.add(e),N.c.push(()=>{X.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}function gn(e,t){gt(e,1,1,()=>{t.delete(e.key)})}function yn(e,t,n,i,r,a,s,c,o,l,h,g){let d=e.length,m=a.length,p=d;const P={};for(;p--;)P[e[p].key]=p;const $=[],E=new Map,S=new Map;for(p=m;p--;){const y=g(r,a,p),R=n(y);let _=s.get(R);_?i&&_.p(y,t):(_=l(R,y),_.c()),E.set(R,$[p]=_),R in P&&S.set(R,Math.abs(p-P[R]))}const I=new Set,C=new Set;function B(y){Me(y,1),y.m(c,h),s.set(y.key,y),h=y.first,m--}for(;d&&m;){const y=$[m-1],R=e[d-1],_=y.key,T=R.key;y===R?(h=y.first,d--,m--):E.has(T)?!s.has(_)||I.has(_)?B(y):C.has(T)?d--:S.get(_)>S.get(T)?(C.add(_),B(y)):(I.add(T),d--):(o(R,s),d--)}for(;d--;){const y=e[d];E.has(y.key)||o(y,s)}for(;m;)B($[m-1]);return $}function mn(e,t){const n={},i={},r={$$scope:1};let a=e.length;for(;a--;){const s=e[a],c=t[a];if(c){for(const o in s)o in c||(i[o]=1);for(const o in c)r[o]||(n[o]=c[o],r[o]=1);e[a]=c}else for(const o in s)r[o]=1}for(const s in i)s in n||(n[s]=void 0);return n}function pn(e){return typeof e=="object"&&e!==null?e:{}}function _n(e){e&&e.c()}function bn(e,t){e&&e.l(t)}function yt(e,t,n,i){const{fragment:r,on_mount:a,on_destroy:s,after_update:c}=e.$$;r&&r.m(t,n),i||ae(()=>{const o=a.map(be).filter(Ve);s?s.push(...o):z(o),e.$$.on_mount=[]}),c.forEach(ae)}function mt(e,t){const n=e.$$;n.fragment!==null&&(z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(e,t){e.$$.dirty[0]===-1&&(H.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function wn(e,t,n,i,r,a,s,c=[-1]){const o=Z;V(e);const l=e.$$={fragment:null,ctx:null,props:a,update:q,not_equal:r,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:we(),dirty:c,skip_bound:!1,root:t.target||o.$$.root};s&&s(l.root);let h=!1;if(l.ctx=n?n(e,t.props||{},(g,d,...m)=>{const p=m.length?m[0]:d;return l.ctx&&r(l.ctx[g],l.ctx[g]=p)&&(!l.skip_bound&&l.bound[g]&&l.bound[g](p),h&&pt(e,g)),d}):[],l.update(),h=!0,z(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){et();const g=ot(t.target);l.fragment&&l.fragment.l(g),g.forEach(K)}else l.fragment&&l.fragment.c();t.intro&&Me(e.$$.fragment),yt(e,t.target,t.anchor,t.customElement),tt(),Be()}V(o)}class Rn{$destroy(){mt(this,1),this.$destroy=q}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const j=[];function xn(e,t=q){let n;const i=new Set;function r(c){if(Je(e,c)&&(e=c,n)){const o=!j.length;for(const l of i)l[1](),j.push(l,e);if(o){for(let l=0;l<j.length;l+=2)j[l][0](j[l+1]);j.length=0}}}function a(c){r(c(e))}function s(c,o=q){const l=[c,o];return i.add(l),i.size===1&&(n=t(r)||q),c(e),()=>{i.delete(l),i.size===0&&(n(),n=null)}}return{set:r,update:a,subscribe:s}}const u={heading1:"heading1",heading2:"heading2",heading3:"heading3",heading4:"heading4",heading5:"heading5",heading6:"heading6",paragraph:"paragraph",preformatted:"preformatted",strong:"strong",em:"em",listItem:"list-item",oListItem:"o-list-item",list:"group-list-item",oList:"group-o-list-item",image:"image",embed:"embed",hyperlink:"hyperlink",label:"label",span:"span"},M={Any:"Any",Document:"Document",Media:"Media",Web:"Web"},ee=()=>(++ee.i).toString();ee.i=0;const _t=e=>{const t=bt(e),n=[];for(let i=0;i<t.length;i++)n.push(Le(t[i]));return{key:ee(),children:n}},G=(e,t=[])=>({key:ee(),type:e.type,text:"text"in e?e.text:void 0,node:e,children:t}),le=e=>G({type:u.span,text:e,spans:[]}),bt=e=>{const t=e.slice(0);for(let n=0;n<t.length;n++){const i=t[n];if(i.type===u.listItem||i.type===u.oListItem){const r=[i];for(;t[n+1]&&t[n+1].type===i.type;)r.push(t[n+1]),t.splice(n,1);i.type===u.listItem?t[n]={type:u.list,items:r}:t[n]={type:u.oList,items:r}}}return t},Le=e=>{if("text"in e)return G(e,Ee(e.spans,e));if("items"in e){const t=[];for(let n=0;n<e.items.length;n++)t.push(Le(e.items[n]));return G(e,t)}return G(e)},Ee=(e,t,n)=>{if(!e.length)return[le(t.text)];const i=e.slice(0),r=[];for(let a=0;a<i.length;a++){const s=i[a],c=n&&n.start||0,o=s.start-c,l=s.end-c,h=[];for(let g=0;g<i.length;g++){const d=i[g];d!==s&&d.start>=s.start&&d.end<=s.end&&(h.push(d),i.splice(g,1),g--)}a===0&&o>0&&r.push(le(t.text.slice(0,o))),r.push(G(s,Ee(h,v(x({},t),{text:t.text.slice(o,l)}),s))),l<t.text.length&&r.push(le(t.text.slice(l,i[a+1]?i[a+1].start-c:void 0)))}return r},wt=(e,t)=>Ie(_t(e).children,t),Ie=(e,t)=>{const n=[];for(let i=0;i<e.length;i++){const r=e[i],a=t(r.type,r.node,r.text,Ie(r.children,t),r.key);a!=null&&n.push(a)}return n},Rt={[u.listItem]:"listItem",[u.oListItem]:"oListItem",[u.list]:"list",[u.oList]:"oList"},xt=e=>(t,n,i,r,a)=>{const s=e[Rt[t]||t];if(s)return s({type:t,node:n,text:i,children:r,key:a})},vt=(...e)=>(...t)=>{for(let n=0;n<e.length;n++){const i=e[n](...t);if(i!=null)return i}};/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var Tt=/["'&<>]/,U=kt;function kt(e){var t=""+e,n=Tt.exec(t);if(!n)return t;var i,r="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}const $t=e=>{var t,n;return x({link_type:M.Document,id:e.id,uid:(t=e.uid)!=null?t:void 0,type:e.type,tags:e.tags,lang:e.lang,url:(n=e.url)!=null?n:void 0,slug:e.slugs[0]},Object.keys(e.data).length>0?{data:e.data}:{})},Ne=(e,t)=>{if(!e)return null;const n="link_type"in e?e:$t(e);switch(n.link_type){case M.Media:case M.Web:return"url"in n?n.url:null;case M.Document:{if("id"in n&&t){const i=t(n);if(i!=null)return i}return"url"in n&&n.url?n.url:null}case M.Any:default:return null}},F=e=>"data"in e&&"label"in e.data?` class="${e.data.label}"`:"",w=(e,t,n)=>`<${e}${F(t)}>${n.join("")}</${e}>`,St=e=>`<pre${F(e)}>${U(e.text)}</pre>`,At=(e,t)=>{let n=`<img src="${t.url}" alt="${U(t.alt)}"${t.copyright?` copyright="${U(t.copyright)}"`:""} />`;return t.linkTo&&(n=Pe(e,{type:u.hyperlink,data:t.linkTo,start:0,end:0},[n])),`<p class="block-img">${n}</p>`},Bt=e=>`<div data-oembed="${e.oembed.embed_url}" data-oembed-type="${e.oembed.type}" data-oembed-provider="${e.oembed.provider_name}"${F(e)}>${e.oembed.html}</div>`,Pe=(e,t,n)=>{switch(t.data.link_type){case M.Web:return`<a href="${U(t.data.url)}" target="${t.data.target}" rel="noopener noreferrer"${F(t)}>${n.join("")}</a>`;case M.Document:return`<a href="${Ne(t.data,e)}"${F(t)}>${n.join("")}</a>`;case M.Media:return`<a href="${t.data.url}"${F(t)}>${n.join("")}</a>`}},Mt=e=>e?U(e).replace(/\n/g,"<br />"):"",je=e=>(t,n,i,r,a)=>{switch(n.type){case u.heading1:return w("h1",n,r);case u.heading2:return w("h2",n,r);case u.heading3:return w("h3",n,r);case u.heading4:return w("h4",n,r);case u.heading5:return w("h5",n,r);case u.heading6:return w("h6",n,r);case u.paragraph:return w("p",n,r);case u.preformatted:return St(n);case u.strong:return w("strong",n,r);case u.em:return w("em",n,r);case u.listItem:return w("li",n,r);case u.oListItem:return w("li",n,r);case u.list:return w("ul",n,r);case u.oList:return w("ol",n,r);case u.image:return At(e,n);case u.embed:return Bt(n);case u.hyperlink:return Pe(e,n,r);case u.label:return w("span",n,r);case u.span:default:return Mt(i)}},Lt=e=>{const t={};for(const n in e){const i=e[n];i&&(t[n]=r=>i(v(x({},r),{children:r.children.join("")})))}return xt(t)},vn=(e,t,n)=>{let i;return n?i=vt(typeof n=="object"?Lt(n):(r,a,s,c,o)=>n(r,a,s,c.join(""),o),je(t)):i=je(t),wt(e,i).join("")},Tn=e=>`https://${e}.cdn.prismic.io/api/v2`,O=e=>Array.isArray(e)?e:[e],Et={accessToken:"access_token"},It=e=>typeof e=="string"?e:[e.field,e.direction==="desc"?e.direction:void 0].filter(Boolean).join(" "),Nt=(e,t)=>{var n;const s=t,{predicates:i}=s,r=ne(s,["predicates"]),a=new URL("documents/search",`${e}/`);if(i)for(const c of O(i))a.searchParams.append("q",`[${c}]`);for(const c in r){const o=(n=Et[c])!=null?n:c;let l=r[c];if(o==="orderings"){const h=r[o];h!=null&&(l=`[${O(h).map(d=>It(d)).join(",")}]`)}else o==="routes"&&typeof r[o]=="object"&&(l=JSON.stringify(O(r[o])));l!=null&&a.searchParams.set(o,O(l).join(","))}return a.toString()},b=(e={},t)=>v(x({},e),{predicates:[...e.predicates||[],...O(t)]}),Pt=e=>typeof e=="function"?e:()=>e;class L extends Error{constructor(t="An invalid API response was returned",n,i){super(t);this.url=n,this.response=i}}const ue=(e,t)=>{const n=e.find(i=>t(i));if(!n)throw new L("Ref could not be found.",void 0,void 0);return n},Fe=e=>ue(e,t=>t.isMasterRef),fe=(e,t)=>ue(e,n=>n.id===t),he=(e,t)=>ue(e,n=>n.label===t),De=e=>e.replace(/%3B/g,";"),jt=e=>{const t={},n=e.split("; ");for(const i of n){const r=i.split("="),a=r.slice(1).join("="),s=De(r[0]).replace(/%3D/g,"=");t[s]=De(a)}return t},Ft=e=>jt(e),Ce=(e,t)=>Ft(t)[e];class Dt extends L{}class Ct extends L{}const qe=e=>Array.isArray(e)?`[${e.map(qe).join(", ")}]`:typeof e=="string"?`"${e}"`:e instanceof Date?`${e.getTime()}`:`${e}`,f=e=>(n,...i)=>{const r=i.map(qe).join(", "),a=n&&i.length?", ":"";return`[${e}(${n}${a}${r})]`},ze=e=>{const t=f(e);return i=>t(i)},qt=e=>{const t=f(e);return(...i)=>t("",...i)},A={at:f("at"),not:f("not"),any:f("any"),in:f("in"),fulltext:f("fulltext"),has:ze("has"),missing:ze("missing"),similar:qt("similar"),geopointNear:f("geopoint.near"),numberLessThan:f("number.lt"),numberGreaterThan:f("number.gt"),numberInRange:f("number.inRange"),dateAfter:f("date.after"),dateBefore:f("date.before"),dateBetween:f("date.between"),dateDayOfMonth:f("date.day-of-month"),dateDayOfMonthAfter:f("date.day-of-month-after"),dateDayOfMonthBefore:f("date.day-of-month-before"),dateDayOfWeek:f("date.day-of-week"),dateDayOfWeekAfter:f("date.day-of-week-after"),dateDayOfWeekBefore:f("date.day-of-week-before"),dateMonth:f("date.month"),dateMonthAfter:f("date.month-after"),dateMonthBefore:f("date.month-before"),dateYear:f("date.year"),dateHour:f("date.hour"),dateHourAfter:f("date.hour-after"),dateHourBefore:f("date.hour-before")},He="io.prismic.preview",zt=100,Ht=5e3,Gt=500;var k;(function(e){e.Master="Master",e.ReleaseID="ReleaseID",e.ReleaseLabel="ReleaseLabel",e.Manual="Manual"})(k||(k={}));const D=e=>A.at("document.type",e),te=e=>A.at("document.tags",e),Ge=e=>A.any("document.tags",e),kn=(...e)=>new Ut(...e);class Ut{constructor(t,n={}){if(this.refState={mode:k.Master,autoPreviewsEnabled:!0},this.cachedRepositoryExpiration=0,this.endpoint=t,this.accessToken=n.accessToken,this.routes=n.routes,this.defaultParams=n.defaultParams,n.ref&&this.queryContentFromRef(n.ref),typeof n.fetch=="function")this.fetchFn=n.fetch;else if(typeof globalThis.fetch=="function")this.fetchFn=globalThis.fetch;else throw new L("A valid fetch implementation was not provided. In environments where fetch is not available (including Node.js), a fetch implementation must be provided via a polyfill or the `fetch` option.",void 0,void 0);this.fetchFn===globalThis.fetch&&(this.fetchFn=this.fetchFn.bind(globalThis))}enableAutoPreviews(){this.refState.autoPreviewsEnabled=!0}enableAutoPreviewsFromReq(t){this.refState.httpRequest=t,this.refState.autoPreviewsEnabled=!0}disableAutoPreviews(){this.refState.autoPreviewsEnabled=!1}async query(t,n){const i=await this.buildQueryURL(v(x({},n),{predicates:t}));return await this.fetch(i,n)}async get(t){const n=await this.buildQueryURL(t);return await this.fetch(n,t)}async getFirst(t){const n=await this.buildQueryURL(t),r=(await this.fetch(n,t)).results[0];if(r)return r;throw new L("No documents were returned",n,void 0)}async dangerouslyGetAll(t={}){const c=t,{limit:n=1/0}=c,i=ne(c,["limit"]),r=v(x({},i),{pageSize:i.pageSize||zt}),a=[];let s;for(;(!s||s.next_page)&&a.length<n;){const o=s?s.page+1:void 0;s=await this.get(v(x({},r),{page:o})),a.push(...s.results),s.next_page&&await new Promise(l=>setTimeout(l,Gt))}return a.slice(0,n)}async getByID(t,n){return await this.getFirst(b(n,A.at("document.id",t)))}async getByIDs(t,n){return await this.get(b(n,A.in("document.id",t)))}async getAllByIDs(t,n){return await this.dangerouslyGetAll(b(n,A.in("document.id",t)))}async getByUID(t,n,i){return await this.getFirst(b(i,[D(t),A.at(`my.${t}.uid`,n)]))}async getByUIDs(t,n,i){return await this.get(b(i,[D(t),A.in(`my.${t}.uid`,n)]))}async getAllByUIDs(t,n,i){return await this.dangerouslyGetAll(b(i,[D(t),A.in(`my.${t}.uid`,n)]))}async getSingle(t,n){return await this.getFirst(b(n,D(t)))}async getByType(t,n){return await this.get(b(n,D(t)))}async getAllByType(t,n){return await this.dangerouslyGetAll(b(n,D(t)))}async getByTag(t,n){return await this.get(b(n,te(t)))}async getAllByTag(t,n){return await this.dangerouslyGetAll(b(n,te(t)))}async getByEveryTag(t,n){return await this.get(b(n,te(t)))}async getAllByEveryTag(t,n){return await this.dangerouslyGetAll(b(n,te(t)))}async getBySomeTags(t,n){return await this.get(b(n,Ge(t)))}async getAllBySomeTags(t,n){return await this.dangerouslyGetAll(b(n,Ge(t)))}async getRepository(){const t=new URL(this.endpoint);return this.accessToken&&t.searchParams.set("access_token",this.accessToken),await this.fetch(t.toString())}async getRefs(){return(await this.getRepository()).refs}async getRefByID(t){const n=await this.getRefs();return fe(n,t)}async getRefByLabel(t){const n=await this.getRefs();return he(n,t)}async getMasterRef(){const t=await this.getRefs();return Fe(t)}async getReleases(){return(await this.getRefs()).filter(n=>!n.isMasterRef)}async getReleaseByID(t){const n=await this.getReleases();return fe(n,t)}async getReleaseByLabel(t){const n=await this.getReleases();return he(n,t)}async getTags(){try{const t=await this.getCachedRepositoryForm("tags");return await this.fetch(t.action)}catch{return(await this.getRepository()).tags}}async buildQueryURL(t={}){const n=t.ref||await this.getResolvedRefString(),i=t.integrationFieldsRef||(await this.getCachedRepository()).integrationFieldsRef||void 0;return Nt(this.endpoint,v(x(x({},this.defaultParams),t),{ref:n,integrationFieldsRef:i,routes:t.routes||this.routes,accessToken:t.accessToken||this.accessToken}))}async resolvePreviewURL(t){var n;let i=t.documentID,r=t.previewToken;if(typeof globalThis.location!="undefined"){const a=new URLSearchParams(globalThis.location.search);i=i||a.get("documentId")||void 0,r=r||a.get("token")||void 0}else((n=this.refState.httpRequest)==null?void 0:n.query)&&(i=i||this.refState.httpRequest.query.documentId,r=r||this.refState.httpRequest.query.token);if(i!=null){const a=await this.getByID(i,{ref:r});return Ne(a,t.linkResolver)}else return t.defaultURL}queryLatestContent(){this.refState.mode=k.Master}queryContentFromReleaseByID(t){this.refState=v(x({},this.refState),{mode:k.ReleaseID,releaseID:t})}queryContentFromReleaseByLabel(t){this.refState=v(x({},this.refState),{mode:k.ReleaseLabel,releaseLabel:t})}queryContentFromRef(t){this.refState=v(x({},this.refState),{mode:k.Manual,ref:t})}async getCachedRepository(){return(!this.cachedRepository||Date.now()>=this.cachedRepositoryExpiration)&&(this.cachedRepositoryExpiration=Date.now()+Ht,this.cachedRepository=await this.getRepository()),this.cachedRepository}async getCachedRepositoryForm(t){const i=(await this.getCachedRepository()).forms[t];if(!i)throw new L(`Form with name "${t}" could not be found`,void 0,void 0);return i}async getResolvedRefString(){var t,n,i;if(this.refState.autoPreviewsEnabled){let s;if(((t=globalThis.document)==null?void 0:t.cookie)?s=Ce(He,globalThis.document.cookie):((i=(n=this.refState.httpRequest)==null?void 0:n.headers)==null?void 0:i.cookie)&&(s=Ce(He,this.refState.httpRequest.headers.cookie)),s)return s}const r=await this.getCachedRepository(),a=this.refState.mode;if(a===k.ReleaseID)return fe(r.refs,this.refState.releaseID).ref;if(a===k.ReleaseLabel)return he(r.refs,this.refState.releaseLabel).ref;if(a===k.Manual){const s=await Pt(this.refState.ref)();if(typeof s=="string")return s}return Fe(r.refs).ref}async fetch(t,n){const i=await this.fetchFn(t);let r;try{r=await i.json()}catch{throw new L(void 0,t,void 0)}switch(i.status){case 200:return r;case 400:throw new Ct(r.message,t,r);case 401:case 403:throw new Dt("error"in r?r.error:r.message,t,r)}throw new L(void 0,t,r)}}/**
 * filesize
 *
 * @copyright 2021 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 8.0.6
 */const Ot=/^(b|B)$/,Ue={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},Wt={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},Yt={floor:Math.floor,ceil:Math.ceil};function Oe(e,t={}){let n=[],i=0,r,a,s,c,o,l,h,g,d,m,p,P,$,E,S,I,C,B,y,R,_;if(isNaN(e))throw new TypeError("Invalid number");if(s=t.bits===!0,S=t.unix===!0,P=t.pad===!0,a=t.base||10,$=t.round!==void 0?t.round:S?1:2,h=t.locale!==void 0?t.locale:"",g=t.localeOptions||{},I=t.separator!==void 0?t.separator:"",C=t.spacer!==void 0?t.spacer:S?"":" ",y=t.symbols||{},B=a===2?t.standard||"iec":"jedec",p=t.output||"string",o=t.fullform===!0,l=t.fullforms instanceof Array?t.fullforms:[],r=t.exponent!==void 0?t.exponent:-1,R=Yt[t.roundingMethod]||Math.round,m=Number(e),d=m<0,c=a>2?1e3:1024,_=isNaN(t.precision)===!1?parseInt(t.precision,10):0,d&&(m=-m),(r===-1||isNaN(r))&&(r=Math.floor(Math.log(m)/Math.log(c)),r<0&&(r=0)),r>8&&(_>0&&(_+=8-r),r=8),p==="exponent")return r;if(m===0)n[0]=0,E=n[1]=S?"":Ue[B][s?"bits":"bytes"][r];else{i=m/(a===2?Math.pow(2,r*10):Math.pow(1e3,r)),s&&(i=i*8,i>=c&&r<8&&(i=i/c,r++));const T=Math.pow(10,r>0?$:0);n[0]=R(i*T)/T,n[0]===c&&r<8&&t.exponent===void 0&&(n[0]=1,r++),E=n[1]=a===10&&r===1?s?"kbit":"kB":Ue[B][s?"bits":"bytes"][r],S&&(n[1]=n[1].charAt(0),Ot.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))}if(d&&(n[0]=-n[0]),_>0&&(n[0]=n[0].toPrecision(_)),n[1]=y[n[1]]||n[1],h===!0?n[0]=n[0].toLocaleString():h.length>0?n[0]=n[0].toLocaleString(h,g):I.length>0&&(n[0]=n[0].toString().replace(".",I)),P&&Number.isInteger(n[0])===!1&&$>0){const T=I||".",de=n[0].toString().split(T),ge=de[1]||"",ye=ge.length,We=$-ye;n[0]=`${de[0]}${T}${ge.padEnd(ye+We,"0")}`}return o&&(n[1]=l[r]?l[r]:Wt[B][r]+(s?"bit":"byte")+(n[0]===1?"":"s")),p==="array"?n:p==="object"?{value:n[0],symbol:n[1],exponent:r,unit:E}:n.join(C)}Oe.partial=e=>t=>Oe(t,e);export{ln as A,Ze as B,xn as C,rt as D,q as E,Zt as F,Jt as G,Xt as H,Vt as I,cn as J,Kt as K,kn as L,Tn as M,vn as N,Oe as O,$e as P,an as Q,yn as R,Rn as S,gn as T,ot as a,nn as b,rn as c,K as d,xe as e,at as f,lt as g,on as h,wn as i,_n as j,en as k,tn as l,bn as m,sn as n,yt as o,mn as p,pn as q,hn as r,Je as s,ie as t,gt as u,mt as v,dn as w,Me as x,fn as y,un as z};
