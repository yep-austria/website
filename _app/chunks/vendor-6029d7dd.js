var Qe=Object.defineProperty,Ke=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var _e=(e,t,n)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))me.call(t,n)&&_e(e,n,t[n]);if(W)for(var n of W(t))pe.call(t,n)&&_e(e,n,t[n]);return e},x=(e,t)=>Ke(e,Ze(t));var ne=(e,t)=>{var n={};for(var i in e)me.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&W)for(var i of W(e))t.indexOf(i)<0&&pe.call(e,i)&&(n[i]=e[i]);return n};function q(){}function Ve(e,t){for(const n in t)e[n]=t[n];return e}function be(e){return e()}function we(){return Object.create(null)}function z(e){e.forEach(be)}function Je(e){return typeof e=="function"}function Xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Y;function Vt(e,t){return Y||(Y=document.createElement("a")),Y.href=t,e===Y.href}function et(e){return Object.keys(e).length===0}function Jt(e,t,n,i){if(e){const s=Re(e,t,n,i);return e[0](s)}}function Re(e,t,n,i){return e[1]&&i?Ve(n.ctx.slice(),e[1](i(t))):n.ctx}function Xt(e,t,n,i){if(e[2]&&i){const s=e[2](i(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const a=[],r=Math.max(t.dirty.length,s.length);for(let c=0;c<r;c+=1)a[c]=t.dirty[c]|s[c];return a}return t.dirty|s}return t.dirty}function en(e,t,n,i,s,a){if(s){const r=Re(t,n,i,a);e.p(r,s)}}function tn(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function nn(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}let Q=!1;function tt(){Q=!0}function nt(){Q=!1}function it(e,t,n,i){for(;e<t;){const s=e+(t-e>>1);n(s)<=i?e=s+1:t=s}return e}function st(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const o=[];for(let l=0;l<t.length;l++){const h=t[l];h.claim_order!==void 0&&o.push(h)}t=o}const n=new Int32Array(t.length+1),i=new Int32Array(t.length);n[0]=-1;let s=0;for(let o=0;o<t.length;o++){const l=t[o].claim_order,h=(s>0&&t[n[s]].claim_order<=l?s+1:it(1,s,d=>t[n[d]].claim_order,l))-1;i[o]=n[h]+1;const g=h+1;n[g]=o,s=Math.max(g,s)}const a=[],r=[];let c=t.length-1;for(let o=n[s]+1;o!=0;o=i[o-1]){for(a.push(t[o-1]);c>=o;c--)r.push(t[c]);c--}for(;c>=0;c--)r.push(t[c]);a.reverse(),r.sort((o,l)=>o.claim_order-l.claim_order);for(let o=0,l=0;o<r.length;o++){for(;l<a.length&&r[o].claim_order>=a[l].claim_order;)l++;const h=l<a.length?a[l]:null;e.insertBefore(r[o],h)}}function rt(e,t){if(Q){for(st(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function at(e,t,n){e.insertBefore(t,n||null)}function ot(e,t,n){Q&&!n?rt(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function K(e){e.parentNode.removeChild(e)}function ve(e){return document.createElement(e)}function ct(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ie(e){return document.createTextNode(e)}function sn(){return ie(" ")}function rn(){return ie("")}function lt(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function an(e,t){for(const n in t)lt(e,n,t[n])}function ut(e){return Array.from(e.childNodes)}function xe(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Te(e,t,n,i,s=!1){xe(e);const a=(()=>{for(let r=e.claim_info.last_index;r<e.length;r++){const c=e[r];if(t(c)){const o=n(c);return o===void 0?e.splice(r,1):e[r]=o,s||(e.claim_info.last_index=r),c}}for(let r=e.claim_info.last_index-1;r>=0;r--){const c=e[r];if(t(c)){const o=n(c);return o===void 0?e.splice(r,1):e[r]=o,s?o===void 0&&e.claim_info.last_index--:e.claim_info.last_index=r,c}}return i()})();return a.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,a}function ke(e,t,n,i){return Te(e,s=>s.nodeName===t,s=>{const a=[];for(let r=0;r<s.attributes.length;r++){const c=s.attributes[r];n[c.name]||a.push(c.name)}a.forEach(r=>s.removeAttribute(r))},()=>i(t))}function on(e,t,n){return ke(e,t,n,ve)}function cn(e,t,n){return ke(e,t,n,ct)}function ft(e,t){return Te(e,n=>n.nodeType===3,n=>{const i=""+t;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>ie(t),!0)}function ln(e){return ft(e," ")}function $e(e,t,n){for(let i=n;i<e.length;i+=1){const s=e[i];if(s.nodeType===8&&s.textContent.trim()===t)return i}return e.length}function un(e){const t=$e(e,"HTML_TAG_START",0),n=$e(e,"HTML_TAG_END",t);if(t===n)return new Se;xe(e);const i=e.splice(t,n+1);K(i[0]),K(i[i.length-1]);const s=i.slice(1,i.length-1);for(const a of s)a.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1;return new Se(s)}function fn(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function hn(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function dn(e,t=document.body){return Array.from(t.querySelectorAll(e))}class ht{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.e=ve(n.nodeName),this.t=n,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)at(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(K)}}class Se extends ht{constructor(t){super();this.e=this.n=null,this.l=t}c(t){this.l?this.n=this.l:super.c(t)}i(t){for(let n=0;n<this.n.length;n+=1)ot(this.t,this.n[n],t)}}let Z;function V(e){Z=e}function se(){if(!Z)throw new Error("Function called outside component initialization");return Z}function gn(e){se().$$.on_mount.push(e)}function yn(e){se().$$.after_update.push(e)}function mn(e,t){se().$$.context.set(e,t)}const H=[],Ae=[],J=[],Be=[],dt=Promise.resolve();let re=!1;function gt(){re||(re=!0,dt.then(Me))}function ae(e){J.push(e)}let oe=!1;const ce=new Set;function Me(){if(!oe){oe=!0;do{for(let e=0;e<H.length;e+=1){const t=H[e];V(t),yt(t.$$)}for(V(null),H.length=0;Ae.length;)Ae.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];ce.has(t)||(ce.add(t),t())}J.length=0}while(H.length);for(;Be.length;)Be.pop()();re=!1,oe=!1,ce.clear()}}function yt(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}const X=new Set;let N;function pn(){N={r:0,c:[],p:N}}function _n(){N.r||z(N.c),N=N.p}function Le(e,t){e&&e.i&&(X.delete(e),e.i(t))}function mt(e,t,n,i){if(e&&e.o){if(X.has(e))return;X.add(e),N.c.push(()=>{X.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}function bn(e,t){mt(e,1,1,()=>{t.delete(e.key)})}function wn(e,t,n,i,s,a,r,c,o,l,h,g){let d=e.length,m=a.length,p=d;const P={};for(;p--;)P[e[p].key]=p;const $=[],E=new Map,S=new Map;for(p=m;p--;){const y=g(s,a,p),R=n(y);let _=r.get(R);_?i&&_.p(y,t):(_=l(R,y),_.c()),E.set(R,$[p]=_),R in P&&S.set(R,Math.abs(p-P[R]))}const I=new Set,C=new Set;function B(y){Le(y,1),y.m(c,h),r.set(y.key,y),h=y.first,m--}for(;d&&m;){const y=$[m-1],R=e[d-1],_=y.key,T=R.key;y===R?(h=y.first,d--,m--):E.has(T)?!r.has(_)||I.has(_)?B(y):C.has(T)?d--:S.get(_)>S.get(T)?(C.add(_),B(y)):(I.add(T),d--):(o(R,r),d--)}for(;d--;){const y=e[d];E.has(y.key)||o(y,r)}for(;m;)B($[m-1]);return $}function Rn(e,t){const n={},i={},s={$$scope:1};let a=e.length;for(;a--;){const r=e[a],c=t[a];if(c){for(const o in r)o in c||(i[o]=1);for(const o in c)s[o]||(n[o]=c[o],s[o]=1);e[a]=c}else for(const o in r)s[o]=1}for(const r in i)r in n||(n[r]=void 0);return n}function vn(e){return typeof e=="object"&&e!==null?e:{}}function xn(e){e&&e.c()}function Tn(e,t){e&&e.l(t)}function pt(e,t,n,i){const{fragment:s,on_mount:a,on_destroy:r,after_update:c}=e.$$;s&&s.m(t,n),i||ae(()=>{const o=a.map(be).filter(Je);r?r.push(...o):z(o),e.$$.on_mount=[]}),c.forEach(ae)}function _t(e,t){const n=e.$$;n.fragment!==null&&(z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(e,t){e.$$.dirty[0]===-1&&(H.push(e),gt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function kn(e,t,n,i,s,a,r,c=[-1]){const o=Z;V(e);const l=e.$$={fragment:null,ctx:null,props:a,update:q,not_equal:s,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:we(),dirty:c,skip_bound:!1,root:t.target||o.$$.root};r&&r(l.root);let h=!1;if(l.ctx=n?n(e,t.props||{},(g,d,...m)=>{const p=m.length?m[0]:d;return l.ctx&&s(l.ctx[g],l.ctx[g]=p)&&(!l.skip_bound&&l.bound[g]&&l.bound[g](p),h&&bt(e,g)),d}):[],l.update(),h=!0,z(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){tt();const g=ut(t.target);l.fragment&&l.fragment.l(g),g.forEach(K)}else l.fragment&&l.fragment.c();t.intro&&Le(e.$$.fragment),pt(e,t.target,t.anchor,t.customElement),nt(),Me()}V(o)}class $n{$destroy(){_t(this,1),this.$destroy=q}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!et(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const j=[];function Sn(e,t=q){let n;const i=new Set;function s(c){if(Xe(e,c)&&(e=c,n)){const o=!j.length;for(const l of i)l[1](),j.push(l,e);if(o){for(let l=0;l<j.length;l+=2)j[l][0](j[l+1]);j.length=0}}}function a(c){s(c(e))}function r(c,o=q){const l=[c,o];return i.add(l),i.size===1&&(n=t(s)||q),c(e),()=>{i.delete(l),i.size===0&&(n(),n=null)}}return{set:s,update:a,subscribe:r}}const u={heading1:"heading1",heading2:"heading2",heading3:"heading3",heading4:"heading4",heading5:"heading5",heading6:"heading6",paragraph:"paragraph",preformatted:"preformatted",strong:"strong",em:"em",listItem:"list-item",oListItem:"o-list-item",list:"group-list-item",oList:"group-o-list-item",image:"image",embed:"embed",hyperlink:"hyperlink",label:"label",span:"span"},M={Any:"Any",Document:"Document",Media:"Media",Web:"Web"},ee=()=>(++ee.i).toString();ee.i=0;const wt=e=>{const t=Rt(e),n=[];for(let i=0;i<t.length;i++)n.push(Ee(t[i]));return{key:ee(),children:n}},G=(e,t=[])=>({key:ee(),type:e.type,text:"text"in e?e.text:void 0,node:e,children:t}),le=e=>G({type:u.span,text:e,spans:[]}),Rt=e=>{const t=e.slice(0);for(let n=0;n<t.length;n++){const i=t[n];if(i.type===u.listItem||i.type===u.oListItem){const s=[i];for(;t[n+1]&&t[n+1].type===i.type;)s.push(t[n+1]),t.splice(n,1);i.type===u.listItem?t[n]={type:u.list,items:s}:t[n]={type:u.oList,items:s}}}return t},Ee=e=>{if("text"in e)return G(e,Ie(e.spans,e));if("items"in e){const t=[];for(let n=0;n<e.items.length;n++)t.push(Ee(e.items[n]));return G(e,t)}return G(e)},Ie=(e,t,n)=>{if(!e.length)return[le(t.text)];const i=e.slice(0),s=[];for(let a=0;a<i.length;a++){const r=i[a],c=n&&n.start||0,o=r.start-c,l=r.end-c,h=[];for(let g=0;g<i.length;g++){const d=i[g];d!==r&&d.start>=r.start&&d.end<=r.end&&(h.push(d),i.splice(g,1),g--)}a===0&&o>0&&s.push(le(t.text.slice(0,o))),s.push(G(r,Ie(h,x(v({},t),{text:t.text.slice(o,l)}),r))),l<t.text.length&&s.push(le(t.text.slice(l,i[a+1]?i[a+1].start-c:void 0)))}return s},vt=(e,t)=>Ne(wt(e).children,t),Ne=(e,t)=>{const n=[];for(let i=0;i<e.length;i++){const s=e[i],a=t(s.type,s.node,s.text,Ne(s.children,t),s.key);a!=null&&n.push(a)}return n},xt={[u.listItem]:"listItem",[u.oListItem]:"oListItem",[u.list]:"list",[u.oList]:"oList"},Tt=e=>(t,n,i,s,a)=>{const r=e[xt[t]||t];if(r)return r({type:t,node:n,text:i,children:s,key:a})},kt=(...e)=>(...t)=>{for(let n=0;n<e.length;n++){const i=e[n](...t);if(i!=null)return i}};/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var $t=/["'&<>]/,U=St;function St(e){var t=""+e,n=$t.exec(t);if(!n)return t;var i,s="",a=0,r=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}r!==a&&(s+=t.substring(r,a)),r=a+1,s+=i}return r!==a?s+t.substring(r,a):s}const At=e=>{var t,n;return v({link_type:M.Document,id:e.id,uid:(t=e.uid)!=null?t:void 0,type:e.type,tags:e.tags,lang:e.lang,url:(n=e.url)!=null?n:void 0,slug:e.slugs[0]},Object.keys(e.data).length>0?{data:e.data}:{})},Pe=(e,t)=>{if(!e)return null;const n="link_type"in e?e:At(e);switch(n.link_type){case M.Media:case M.Web:return"url"in n?n.url:null;case M.Document:{if("id"in n&&t){const i=t(n);if(i!=null)return i}return"url"in n&&n.url?n.url:null}case M.Any:default:return null}},F=e=>"data"in e&&"label"in e.data?` class="${e.data.label}"`:"",w=(e,t,n)=>`<${e}${F(t)}>${n.join("")}</${e}>`,Bt=e=>`<pre${F(e)}>${U(e.text)}</pre>`,Mt=(e,t)=>{let n=`<img src="${t.url}" alt="${U(t.alt)}"${t.copyright?` copyright="${U(t.copyright)}"`:""} />`;return t.linkTo&&(n=je(e,{type:u.hyperlink,data:t.linkTo,start:0,end:0},[n])),`<p class="block-img">${n}</p>`},Lt=e=>`<div data-oembed="${e.oembed.embed_url}" data-oembed-type="${e.oembed.type}" data-oembed-provider="${e.oembed.provider_name}"${F(e)}>${e.oembed.html}</div>`,je=(e,t,n)=>{switch(t.data.link_type){case M.Web:return`<a href="${U(t.data.url)}" target="${t.data.target}" rel="noopener noreferrer"${F(t)}>${n.join("")}</a>`;case M.Document:return`<a href="${Pe(t.data,e)}"${F(t)}>${n.join("")}</a>`;case M.Media:return`<a href="${t.data.url}"${F(t)}>${n.join("")}</a>`}},Et=e=>e?U(e).replace(/\n/g,"<br />"):"",Fe=e=>(t,n,i,s,a)=>{switch(n.type){case u.heading1:return w("h1",n,s);case u.heading2:return w("h2",n,s);case u.heading3:return w("h3",n,s);case u.heading4:return w("h4",n,s);case u.heading5:return w("h5",n,s);case u.heading6:return w("h6",n,s);case u.paragraph:return w("p",n,s);case u.preformatted:return Bt(n);case u.strong:return w("strong",n,s);case u.em:return w("em",n,s);case u.listItem:return w("li",n,s);case u.oListItem:return w("li",n,s);case u.list:return w("ul",n,s);case u.oList:return w("ol",n,s);case u.image:return Mt(e,n);case u.embed:return Lt(n);case u.hyperlink:return je(e,n,s);case u.label:return w("span",n,s);case u.span:default:return Et(i)}},It=e=>{const t={};for(const n in e){const i=e[n];i&&(t[n]=s=>i(x(v({},s),{children:s.children.join("")})))}return Tt(t)},An=(e,t,n)=>{let i;return n?i=kt(typeof n=="object"?It(n):(s,a,r,c,o)=>n(s,a,r,c.join(""),o),Fe(t)):i=Fe(t),vt(e,i).join("")},Bn=e=>`https://${e}.cdn.prismic.io/api/v2`,O=e=>Array.isArray(e)?e:[e],Nt={accessToken:"access_token"},Pt=e=>typeof e=="string"?e:[e.field,e.direction==="desc"?e.direction:void 0].filter(Boolean).join(" "),jt=(e,t)=>{var n;const r=t,{predicates:i}=r,s=ne(r,["predicates"]),a=new URL("documents/search",`${e}/`);if(i)for(const c of O(i))a.searchParams.append("q",`[${c}]`);for(const c in s){const o=(n=Nt[c])!=null?n:c;let l=s[c];if(o==="orderings"){const h=s[o];h!=null&&(l=`[${O(h).map(d=>Pt(d)).join(",")}]`)}else o==="routes"&&typeof s[o]=="object"&&(l=JSON.stringify(O(s[o])));l!=null&&a.searchParams.set(o,O(l).join(","))}return a.toString()},b=(e={},t)=>x(v({},e),{predicates:[...e.predicates||[],...O(t)]}),Ft=e=>typeof e=="function"?e:()=>e;class L extends Error{constructor(t="An invalid API response was returned",n,i){super(t);this.url=n,this.response=i}}const ue=(e,t)=>{const n=e.find(i=>t(i));if(!n)throw new L("Ref could not be found.",void 0,void 0);return n},De=e=>ue(e,t=>t.isMasterRef),fe=(e,t)=>ue(e,n=>n.id===t),he=(e,t)=>ue(e,n=>n.label===t),Ce=e=>e.replace(/%3B/g,";"),Dt=e=>{const t={},n=e.split("; ");for(const i of n){const s=i.split("="),a=s.slice(1).join("="),r=Ce(s[0]).replace(/%3D/g,"=");t[r]=Ce(a)}return t},Ct=e=>Dt(e),qe=(e,t)=>Ct(t)[e];class qt extends L{}class zt extends L{}const ze=e=>Array.isArray(e)?`[${e.map(ze).join(", ")}]`:typeof e=="string"?`"${e}"`:e instanceof Date?`${e.getTime()}`:`${e}`,f=e=>(n,...i)=>{const s=i.map(ze).join(", "),a=n&&i.length?", ":"";return`[${e}(${n}${a}${s})]`},He=e=>{const t=f(e);return i=>t(i)},Ht=e=>{const t=f(e);return(...i)=>t("",...i)},A={at:f("at"),not:f("not"),any:f("any"),in:f("in"),fulltext:f("fulltext"),has:He("has"),missing:He("missing"),similar:Ht("similar"),geopointNear:f("geopoint.near"),numberLessThan:f("number.lt"),numberGreaterThan:f("number.gt"),numberInRange:f("number.inRange"),dateAfter:f("date.after"),dateBefore:f("date.before"),dateBetween:f("date.between"),dateDayOfMonth:f("date.day-of-month"),dateDayOfMonthAfter:f("date.day-of-month-after"),dateDayOfMonthBefore:f("date.day-of-month-before"),dateDayOfWeek:f("date.day-of-week"),dateDayOfWeekAfter:f("date.day-of-week-after"),dateDayOfWeekBefore:f("date.day-of-week-before"),dateMonth:f("date.month"),dateMonthAfter:f("date.month-after"),dateMonthBefore:f("date.month-before"),dateYear:f("date.year"),dateHour:f("date.hour"),dateHourAfter:f("date.hour-after"),dateHourBefore:f("date.hour-before")},Ge="io.prismic.preview",Gt=100,Ut=5e3,Ot=500;var k;(function(e){e.Master="Master",e.ReleaseID="ReleaseID",e.ReleaseLabel="ReleaseLabel",e.Manual="Manual"})(k||(k={}));const D=e=>A.at("document.type",e),te=e=>A.at("document.tags",e),Ue=e=>A.any("document.tags",e),Mn=(...e)=>new Wt(...e);class Wt{constructor(t,n={}){if(this.refState={mode:k.Master,autoPreviewsEnabled:!0},this.cachedRepositoryExpiration=0,this.endpoint=t,this.accessToken=n.accessToken,this.routes=n.routes,this.defaultParams=n.defaultParams,n.ref&&this.queryContentFromRef(n.ref),typeof n.fetch=="function")this.fetchFn=n.fetch;else if(typeof globalThis.fetch=="function")this.fetchFn=globalThis.fetch;else throw new L("A valid fetch implementation was not provided. In environments where fetch is not available (including Node.js), a fetch implementation must be provided via a polyfill or the `fetch` option.",void 0,void 0);this.fetchFn===globalThis.fetch&&(this.fetchFn=this.fetchFn.bind(globalThis))}enableAutoPreviews(){this.refState.autoPreviewsEnabled=!0}enableAutoPreviewsFromReq(t){this.refState.httpRequest=t,this.refState.autoPreviewsEnabled=!0}disableAutoPreviews(){this.refState.autoPreviewsEnabled=!1}async query(t,n){const i=await this.buildQueryURL(x(v({},n),{predicates:t}));return await this.fetch(i,n)}async get(t){const n=await this.buildQueryURL(t);return await this.fetch(n,t)}async getFirst(t){const n=await this.buildQueryURL(t),s=(await this.fetch(n,t)).results[0];if(s)return s;throw new L("No documents were returned",n,void 0)}async dangerouslyGetAll(t={}){const c=t,{limit:n=1/0}=c,i=ne(c,["limit"]),s=x(v({},i),{pageSize:i.pageSize||Gt}),a=[];let r;for(;(!r||r.next_page)&&a.length<n;){const o=r?r.page+1:void 0;r=await this.get(x(v({},s),{page:o})),a.push(...r.results),r.next_page&&await new Promise(l=>setTimeout(l,Ot))}return a.slice(0,n)}async getByID(t,n){return await this.getFirst(b(n,A.at("document.id",t)))}async getByIDs(t,n){return await this.get(b(n,A.in("document.id",t)))}async getAllByIDs(t,n){return await this.dangerouslyGetAll(b(n,A.in("document.id",t)))}async getByUID(t,n,i){return await this.getFirst(b(i,[D(t),A.at(`my.${t}.uid`,n)]))}async getByUIDs(t,n,i){return await this.get(b(i,[D(t),A.in(`my.${t}.uid`,n)]))}async getAllByUIDs(t,n,i){return await this.dangerouslyGetAll(b(i,[D(t),A.in(`my.${t}.uid`,n)]))}async getSingle(t,n){return await this.getFirst(b(n,D(t)))}async getByType(t,n){return await this.get(b(n,D(t)))}async getAllByType(t,n){return await this.dangerouslyGetAll(b(n,D(t)))}async getByTag(t,n){return await this.get(b(n,te(t)))}async getAllByTag(t,n){return await this.dangerouslyGetAll(b(n,te(t)))}async getByEveryTag(t,n){return await this.get(b(n,te(t)))}async getAllByEveryTag(t,n){return await this.dangerouslyGetAll(b(n,te(t)))}async getBySomeTags(t,n){return await this.get(b(n,Ue(t)))}async getAllBySomeTags(t,n){return await this.dangerouslyGetAll(b(n,Ue(t)))}async getRepository(){const t=new URL(this.endpoint);return this.accessToken&&t.searchParams.set("access_token",this.accessToken),await this.fetch(t.toString())}async getRefs(){return(await this.getRepository()).refs}async getRefByID(t){const n=await this.getRefs();return fe(n,t)}async getRefByLabel(t){const n=await this.getRefs();return he(n,t)}async getMasterRef(){const t=await this.getRefs();return De(t)}async getReleases(){return(await this.getRefs()).filter(n=>!n.isMasterRef)}async getReleaseByID(t){const n=await this.getReleases();return fe(n,t)}async getReleaseByLabel(t){const n=await this.getReleases();return he(n,t)}async getTags(){try{const t=await this.getCachedRepositoryForm("tags");return await this.fetch(t.action)}catch{return(await this.getRepository()).tags}}async buildQueryURL(t={}){const n=t.ref||await this.getResolvedRefString(),i=t.integrationFieldsRef||(await this.getCachedRepository()).integrationFieldsRef||void 0;return jt(this.endpoint,x(v(v({},this.defaultParams),t),{ref:n,integrationFieldsRef:i,routes:t.routes||this.routes,accessToken:t.accessToken||this.accessToken}))}async resolvePreviewURL(t){var n;let i=t.documentID,s=t.previewToken;if(typeof globalThis.location!="undefined"){const a=new URLSearchParams(globalThis.location.search);i=i||a.get("documentId")||void 0,s=s||a.get("token")||void 0}else((n=this.refState.httpRequest)==null?void 0:n.query)&&(i=i||this.refState.httpRequest.query.documentId,s=s||this.refState.httpRequest.query.token);if(i!=null){const a=await this.getByID(i,{ref:s});return Pe(a,t.linkResolver)}else return t.defaultURL}queryLatestContent(){this.refState.mode=k.Master}queryContentFromReleaseByID(t){this.refState=x(v({},this.refState),{mode:k.ReleaseID,releaseID:t})}queryContentFromReleaseByLabel(t){this.refState=x(v({},this.refState),{mode:k.ReleaseLabel,releaseLabel:t})}queryContentFromRef(t){this.refState=x(v({},this.refState),{mode:k.Manual,ref:t})}async getCachedRepository(){return(!this.cachedRepository||Date.now()>=this.cachedRepositoryExpiration)&&(this.cachedRepositoryExpiration=Date.now()+Ut,this.cachedRepository=await this.getRepository()),this.cachedRepository}async getCachedRepositoryForm(t){const i=(await this.getCachedRepository()).forms[t];if(!i)throw new L(`Form with name "${t}" could not be found`,void 0,void 0);return i}async getResolvedRefString(){var t,n,i;if(this.refState.autoPreviewsEnabled){let r;if(((t=globalThis.document)==null?void 0:t.cookie)?r=qe(Ge,globalThis.document.cookie):((i=(n=this.refState.httpRequest)==null?void 0:n.headers)==null?void 0:i.cookie)&&(r=qe(Ge,this.refState.httpRequest.headers.cookie)),r)return r}const s=await this.getCachedRepository(),a=this.refState.mode;if(a===k.ReleaseID)return fe(s.refs,this.refState.releaseID).ref;if(a===k.ReleaseLabel)return he(s.refs,this.refState.releaseLabel).ref;if(a===k.Manual){const r=await Ft(this.refState.ref)();if(typeof r=="string")return r}return De(s.refs).ref}async fetch(t,n){const i=await this.fetchFn(t);let s;try{s=await i.json()}catch{throw new L(void 0,t,void 0)}switch(i.status){case 200:return s;case 400:throw new zt(s.message,t,s);case 401:case 403:throw new qt("error"in s?s.error:s.message,t,s)}throw new L(void 0,t,s)}}/**
 * filesize
 *
 * @copyright 2021 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 8.0.6
 */const Yt=/^(b|B)$/,Oe={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},Qt={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},Kt={floor:Math.floor,ceil:Math.ceil};function We(e,t={}){let n=[],i=0,s,a,r,c,o,l,h,g,d,m,p,P,$,E,S,I,C,B,y,R,_;if(isNaN(e))throw new TypeError("Invalid number");if(r=t.bits===!0,S=t.unix===!0,P=t.pad===!0,a=t.base||10,$=t.round!==void 0?t.round:S?1:2,h=t.locale!==void 0?t.locale:"",g=t.localeOptions||{},I=t.separator!==void 0?t.separator:"",C=t.spacer!==void 0?t.spacer:S?"":" ",y=t.symbols||{},B=a===2?t.standard||"iec":"jedec",p=t.output||"string",o=t.fullform===!0,l=t.fullforms instanceof Array?t.fullforms:[],s=t.exponent!==void 0?t.exponent:-1,R=Kt[t.roundingMethod]||Math.round,m=Number(e),d=m<0,c=a>2?1e3:1024,_=isNaN(t.precision)===!1?parseInt(t.precision,10):0,d&&(m=-m),(s===-1||isNaN(s))&&(s=Math.floor(Math.log(m)/Math.log(c)),s<0&&(s=0)),s>8&&(_>0&&(_+=8-s),s=8),p==="exponent")return s;if(m===0)n[0]=0,E=n[1]=S?"":Oe[B][r?"bits":"bytes"][s];else{i=m/(a===2?Math.pow(2,s*10):Math.pow(1e3,s)),r&&(i=i*8,i>=c&&s<8&&(i=i/c,s++));const T=Math.pow(10,s>0?$:0);n[0]=R(i*T)/T,n[0]===c&&s<8&&t.exponent===void 0&&(n[0]=1,s++),E=n[1]=a===10&&s===1?r?"kbit":"kB":Oe[B][r?"bits":"bytes"][s],S&&(n[1]=n[1].charAt(0),Yt.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))}if(d&&(n[0]=-n[0]),_>0&&(n[0]=n[0].toPrecision(_)),n[1]=y[n[1]]||n[1],h===!0?n[0]=n[0].toLocaleString():h.length>0?n[0]=n[0].toLocaleString(h,g):I.length>0&&(n[0]=n[0].toString().replace(".",I)),P&&Number.isInteger(n[0])===!1&&$>0){const T=I||".",de=n[0].toString().split(T),ge=de[1]||"",ye=ge.length,Ye=$-ye;n[0]=`${de[0]}${T}${ge.padEnd(ye+Ye,"0")}`}return o&&(n[1]=l[s]?l[s]:Qt[B][s]+(r?"bit":"byte")+(n[0]===1?"":"s")),p==="array"?n:p==="object"?{value:n[0],symbol:n[1],exponent:s,unit:E}:n.join(C)}We.partial=e=>t=>We(t,e);export{gn as A,Ve as B,Sn as C,rt as D,q as E,Jt as F,en as G,tn as H,Xt as I,ct as J,cn as K,an as L,nn as M,dn as N,Vt as O,hn as P,Mn as Q,Bn as R,$n as S,An as T,We as U,Se as V,un as W,wn as X,bn as Y,ut as a,lt as b,on as c,K as d,ve as e,ot as f,ft as g,fn as h,kn as i,xn as j,sn as k,rn as l,Tn as m,ln as n,pt as o,Rn as p,vn as q,pn as r,Xe as s,ie as t,mt as u,_t as v,_n as w,Le as x,mn as y,yn as z};
